<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake.io - D3ez_ Edition</title>
<style>
    body {
        background-color: #111;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        color: white;
        font-family: sans-serif;
    }
    canvas {
        background-color: #1e1e1e;
        border: 3px solid #fff;
        box-shadow: 0 0 20px lime;
    }
    #menu {
        text-align: center;
    }
    button {
        padding: 10px 20px;
        margin: 5px;
        font-size: 18px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background: lime;
        color: black;
        font-weight: bold;
    }
</style>
</head>
<body>
<div id="menu">
    <h1>Snake.io - D3ez_ Edition</h1>
    <p>Select Difficulty</p>
    <button onclick="startGame(150)">Easy</button>
    <button onclick="startGame(100)">Medium</button>
    <button onclick="startGame(70)">Hard</button>
    <button onclick="startGame(40)">Insane</button>
</div>
<canvas id="gameCanvas" width="500" height="500" style="display:none;"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let gridSize = 20;
let snake = [];
let food;
let dx = 0, dy = 0;
let score = 0;
let gameInterval;
let speed;

function spawnFood() {
    return {
        x: Math.floor(Math.random() * (canvas.width / gridSize)),
        y: Math.floor(Math.random() * (canvas.height / gridSize)),
        pulse: 0
    };
}

function drawSnake() {
    snake.forEach((part, index) => {
        ctx.fillStyle = `hsl(${(index * 20) % 360}, 100%, 50%)`;
        ctx.fillRect(part.x * gridSize, part.y * gridSize, gridSize - 2, gridSize - 2);
    });
}

function drawFood() {
    ctx.fillStyle = `hsl(${food.pulse}, 100%, 50%)`;
    ctx.beginPath();
    ctx.arc(
        food.x * gridSize + gridSize / 2,
        food.y * gridSize + gridSize / 2,
        gridSize / 2.5,
        0,
        Math.PI * 2
    );
    ctx.fill();
    food.pulse = (food.pulse + 5) % 360;
}

function gameLoop() {
    const head = { x: snake[0].x + dx, y: snake[0].y + dy };

    // Wrap screen
    head.x = (head.x + canvas.width / gridSize) % (canvas.width / gridSize);
    head.y = (head.y + canvas.height / gridSize) % (canvas.height / gridSize);

    // Collision with self
    for (let part of snake) {
        if (part.x === head.x && part.y === head.y) {
            endGame();
            return;
        }
    }

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
        score++;
        food = spawnFood();
    } else {
        snake.pop();
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawFood();
    drawSnake();

    ctx.fillStyle = "white";
    ctx.font = "16px Arial";
    ctx.fillText("Score: " + score, 10, 20);
}

function startGame(selectedSpeed) {
    document.getElementById("menu").style.display = "none";
    canvas.style.display = "block";
    snake = [{ x: 10, y: 10 }];
    food = spawnFood();
    dx = 1; dy = 0;
    score = 0;
    speed = selectedSpeed;
    clearInterval(gameInterval);
    gameInterval = setInterval(gameLoop, speed);
}

function endGame() {
    clearInterval(gameInterval);
    alert("Game Over! Score: " + score);
    document.getElementById("menu").style.display = "block";
    canvas.style.display = "none";
}

document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowUp" && dy === 0) { dx = 0; dy = -1; }
    if (e.key === "ArrowDown" && dy === 0) { dx = 0; dy = 1; }
    if (e.key === "ArrowLeft" && dx === 0) { dx = -1; dy = 0; }
    if (e.key === "ArrowRight" && dx === 0) { dx = 1; dy = 0; }
});
</script>
</body>
</html>
